{"ast":null,"code":"var _jsxFileName = \"D:\\\\Senai\\\\SP_MEDICAL_GROUP\\\\sp_medical_group_frontend\\\\src\\\\pages\\\\Medico\\\\medico.js\",\n    _s = $RefreshSig$();\n\nimport { Component } from 'react';\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { Link, Switch } from 'react-router-dom';\nimport { parseJwt } from '../../services/auth';\nimport Header from '../../Components/header/header';\nimport '../../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ConsultaMedi() {\n  _s();\n\n  const [listaConsulta, setConsulta] = useState([]);\n  const [descricaoConsulta, setDescricao] = useState(''); // setState para modo de edicao\n\n  const [atualizando, setAtualizando] = useState({\n    status: false,\n    idLinha: null\n  });\n\n  function getConsultas() {\n    axios.get('http://localhost:5000/api/consulta/minhas-consultas/' + parseJwt().jti, {\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.getItem('usuario-login')\n      }\n    }).then(resposta => {\n      if (resposta.status === 200) {\n        setConsulta(resposta.data);\n      }\n    }).catch(erro => console.log(erro));\n  }\n\n  function Atualizando({\n    idLinha,\n    descricaoAtual\n  }) {\n    setAtualizando({\n      status: true,\n      idLinha: idLinha\n    });\n    setDescricao(descricaoAtual);\n  }\n\n  function salvarEdicao({\n    idLinha,\n    novaDescricao\n  }) {\n    patchDescricao({\n      idLinha,\n      novaDescricao\n    });\n  }\n\n  function cancelarEdicao() {\n    setAtualizando({\n      status: false,\n      idLinha: null\n    });\n    setDescricao(\"\");\n  }\n\n  function patchDescricao({\n    id,\n    novaDescricao\n  }) {\n    console.log(id, novaDescricao);\n    axios.patch('http://localhost:5000/api/consulta/' + id, {\n      descricaoConsulta: novaDescricao\n    }, {\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.getItem('usuario-login')\n      }\n    }).then(resposta => {\n      if (resposta.status === 204) {\n        console.log(\"Descricação atualizada\");\n        getConsultas();\n        cancelarEdicao();\n      }\n    }).catch(erro => console.log(erro));\n  } // funções para ciclos de vida \n\n\n  useEffect(getConsultas, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"logout\",\n        children: \"Sair\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"section-consultas\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Consultas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"M\\xE9dico\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Pacientes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Especialidade\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Hor\\xE1rio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Descri\\xE7\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Editar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: listaConsulta.map(consulta => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: consulta.idMedicoNavigation.nomeMedico\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: consulta.idPacienteNavigation.nomePaciente\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: consulta.idMedicoNavigation.idEspecialidadeNavigation.descricaoEspec\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: consulta.dataConsulta\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: consulta.hroConsulta\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: consulta.idStatusConsultaNavigation.statusConsulta\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: consulta.descricaoConsulta\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [atualizando.status && atualizando.id === consulta.idConsulta ? /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  defaultValue: consulta.descricaoConsulta,\n                  onChange: event => setDescricao(event.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 53\n                }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: consulta.descricaoConsulta\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 54\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  className: \"form-editar\",\n                  onSubmit: \"\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => Atualizando({\n                      idLinha: consulta.idConsulta,\n                      descricaoAtual: consulta.descricaoConsulta\n                    }),\n                    className: \"Editar\",\n                    type: \"submit\",\n                    children: \"Editar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 41\n              }, this)]\n            }, consulta.idConsulta, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"section-editar\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Editar Descri\\xE7\\xE3o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editar\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form-alterar\",\n          onSubmit: consulta => salvarEdicao({\n            idLinha: consulta.idConsulta,\n            novaDescricao: descricaoConsulta\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Altere a descri\\xE7\\xE3o da consulta desejada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => Atualizando,\n            className: \"btn-alterar\",\n            type: \"submit\",\n            children: \"Alterar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ConsultaMedi, \"I8OOdoLRYg+5rRr7cMF6QRqBSuo=\");\n\n_c = ConsultaMedi;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConsultaMedi\");","map":{"version":3,"sources":["D:/Senai/SP_MEDICAL_GROUP/sp_medical_group_frontend/src/pages/Medico/medico.js"],"names":["Component","axios","React","useState","useEffect","Link","Switch","parseJwt","Header","ConsultaMedi","listaConsulta","setConsulta","descricaoConsulta","setDescricao","atualizando","setAtualizando","status","idLinha","getConsultas","get","jti","headers","localStorage","getItem","then","resposta","data","catch","erro","console","log","Atualizando","descricaoAtual","salvarEdicao","novaDescricao","patchDescricao","cancelarEdicao","id","patch","map","consulta","idMedicoNavigation","nomeMedico","idPacienteNavigation","nomePaciente","idEspecialidadeNavigation","descricaoEspec","dataConsulta","hroConsulta","idStatusConsultaNavigation","statusConsulta","idConsulta","event","target","value"],"mappings":"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","sourcesContent":["import {Component} from 'react'\r\nimport axios from 'axios';\r\nimport React, {useState,useEffect} from 'react'\r\nimport {Link, Switch} from 'react-router-dom';\r\nimport { parseJwt } from '../../services/auth';\r\n\r\nimport Header from '../../Components/header/header'\r\n\r\nimport '../../App.css';\r\n\r\n\r\n\r\nexport default function ConsultaMedi(){\r\n    const [listaConsulta, setConsulta] = useState([])\r\n\r\n    const [descricaoConsulta, setDescricao] = useState('')\r\n\r\n    // setState para modo de edicao\r\n    const [atualizando, setAtualizando] = useState({\r\n        status: false,\r\n        idLinha: null\r\n    })\r\n\r\n\r\n    function getConsultas() {\r\n        axios.get('http://localhost:5000/api/consulta/minhas-consultas/' + parseJwt().jti, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + localStorage.getItem('usuario-login')\r\n            }\r\n        })\r\n\r\n            .then(resposta => {\r\n                if (resposta.status === 200) {\r\n\r\n                    setConsulta(resposta.data)\r\n                }\r\n            })\r\n            .catch(erro => console.log(erro))\r\n    }\r\n\r\n\r\n    function Atualizando({ idLinha, descricaoAtual }) {\r\n\r\n        setAtualizando({\r\n\r\n            status: true,\r\n            idLinha: idLinha\r\n        })\r\n\r\n        setDescricao(descricaoAtual)\r\n    }\r\n\r\n    function salvarEdicao({ idLinha, novaDescricao }) {\r\n\r\n        patchDescricao({ idLinha, novaDescricao })\r\n\r\n    }\r\n\r\n    function cancelarEdicao() {\r\n\r\n        setAtualizando({\r\n            status: false,\r\n            idLinha: null\r\n        })\r\n\r\n        setDescricao(\"\")\r\n\r\n    }\r\n\r\n\r\n    function patchDescricao({ id, novaDescricao }) {\r\n\r\n        console.log(id, novaDescricao)\r\n\r\n        axios.patch('http://localhost:5000/api/consulta/' + id, { descricaoConsulta : novaDescricao }, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + localStorage.getItem('usuario-login')\r\n            }\r\n        })\r\n\r\n            .then(resposta => {\r\n                if (resposta.status === 204) {\r\n\r\n                    console.log(\"Descricação atualizada\")\r\n\r\n                    getConsultas()\r\n\r\n                    cancelarEdicao()\r\n\r\n                }\r\n            })\r\n            .catch(erro => console.log(erro))\r\n\r\n    }\r\n\r\n    // funções para ciclos de vida \r\n    useEffect(getConsultas, [])\r\n\r\n    return(\r\n        <div>\r\n            <Header />\r\n            <Link to=\"/\"><h3 className=\"logout\">Sair</h3></Link>\r\n               \r\n            <section className=\"section-consultas\">\r\n                <h1>Consultas</h1>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Médico</th>\r\n                            <th>Pacientes</th>\r\n                            <th>Especialidade</th>\r\n                            <th>Data</th>\r\n                            <th>Horário</th>\r\n                            <th>Status</th>\r\n                            <th>Descrição</th>\r\n                            <th>Editar</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            listaConsulta.map((consulta) => {\r\n                                return(\r\n                                    <tr key={consulta.idConsulta}>\r\n                                        <td>{consulta.idMedicoNavigation.nomeMedico}</td>\r\n                                        <td>{consulta.idPacienteNavigation.nomePaciente}</td>\r\n                                        <td>{consulta.idMedicoNavigation.idEspecialidadeNavigation.descricaoEspec}</td>\r\n                                        <td>{consulta.dataConsulta}</td>\r\n                                        <td>{consulta.hroConsulta}</td>\r\n                                        <td>{consulta.idStatusConsultaNavigation.statusConsulta}</td>\r\n                                        <td>{consulta.descricaoConsulta}</td>\r\n                                        <td>\r\n                                            {\r\n                                                atualizando.status && atualizando.id === consulta.idConsulta ? \r\n                                                (\r\n                                                    \r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        defaultValue={consulta.descricaoConsulta}\r\n                                                        onChange={(event) => setDescricao(event.target.value)}\r\n                                                    />\r\n                                                ) : (<td>{consulta.descricaoConsulta}</td>)\r\n                                            }\r\n                                            <form className=\"form-editar\" onSubmit=\"\">\r\n                                                <button onClick={() => Atualizando({ idLinha: consulta.idConsulta, descricaoAtual: consulta.descricaoConsulta })} className=\"Editar\" type=\"submit\">Editar</button>\r\n                                            </form>\r\n                                        </td>\r\n                                    </tr>\r\n                                )\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </section>\r\n            <section className=\"section-editar\">\r\n                <h1>Editar Descrição</h1>\r\n                <div className=\"editar\">\r\n                        <form className=\"form-alterar\" onSubmit={(consulta) => salvarEdicao({ idLinha: consulta.idConsulta, novaDescricao: descricaoConsulta })}>\r\n                            <input type=\"text\" placeholder=\"Altere a descrição da consulta desejada\"/>\r\n                            <button  onClick={() => Atualizando} className=\"btn-alterar\" type=\"submit\">Alterar</button>\r\n                        </form>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}